<odoo>
    <record id="view_cong_viec_analysis_search" model="ir.ui.view">
        <field name="name">quan.ly.cong.viec.analysis.search</field>
        <field name="model">quan.ly.cong.viec</field>
        <field name="arch" type="xml">
            <search string="Ph√¢n t√≠ch C√¥ng vi·ªác">
                <field name="du_an_id"/>
                <field name="nguoi_giao_viec_id"/>
                
                <separator/>
                <filter string="üî• Vi·ªác Kh·∫©n c·∫•p" name="high_priority" domain="[('do_uu_tien', 'in', ['2', '3'])]"/>
                <filter string="‚ö†Ô∏è Vi·ªác Tr·ªÖ h·∫°n" name="overdue" domain="[('trang_thai_deadline', '=', 'tre_han')]"/>
                <separator/>
                <filter string="ƒêang th·ª±c hi·ªán" name="doing" domain="[('trang_thai', '=', 'dang_lam')]"/>
                <filter string="ƒê√£ ho√†n th√†nh" name="done" domain="[('trang_thai', '=', 'hoan_thanh')]"/>
                
                <group expand="1" string="Ph√¢n t√≠ch theo...">
                    <filter string="D·ª± √°n" name="group_project" context="{'group_by': 'du_an_id'}"/>
                    <filter string="Ng∆∞·ªùi th·ª±c hi·ªán" name="group_assignee" context="{'group_by': 'nhan_vien_tham_gia_ids'}"/>
                    <filter string="H·∫°n ch√≥t (Th√°ng)" name="group_deadline" context="{'group_by': 'han_hoan_thanh:month'}"/>
                    <filter string="Tr·∫°ng th√°i" name="group_stage" context="{'group_by': 'trang_thai'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="view_du_an_task_analysis_graph" model="ir.ui.view">
        <field name="name">quan.ly.cong.viec.graph.workload</field>
        <field name="model">quan.ly.cong.viec</field>
        <field name="arch" type="xml">
            <graph string="Ph√¢n b·ªï C√¥ng vi·ªác theo D·ª± √°n" type="bar" sample="1" stacked="1" order="DESC">
                <field name="du_an_id"/>
                
                <field name="trang_thai"/>
                
                </graph>
        </field>
    </record>

    <record id="view_du_an_task_trend_graph" model="ir.ui.view">
        <field name="name">quan.ly.cong.viec.graph.trend</field>
        <field name="model">quan.ly.cong.viec</field>
        <field name="arch" type="xml">
            <graph string="Xu h∆∞·ªõng Ho√†n th√†nh (Timeline)" type="line" sample="1">
                <field name="han_hoan_thanh" interval="month"/>
                
                <field name="trang_thai"/>
            </graph>
        </field>
    </record>

    <record id="view_du_an_task_analysis_pivot" model="ir.ui.view">
        <field name="name">quan.ly.cong.viec.pivot</field>
        <field name="model">quan.ly.cong.viec</field>
        <field name="arch" type="xml">
            <pivot string="B√°o c√°o Hi·ªáu su·∫•t (KPI)" sample="1" disable_linking="True" display_quantity="true">
                <field name="du_an_id" type="row"/>
                <field name="nguoi_giao_viec_id" type="row"/>
                
                <field name="trang_thai" type="col"/>
                
                <field name="gio_du_kien" type="measure" string="Gi·ªù Est"/>
                <field name="gio_thuc_te" type="measure" string="Gi·ªù Act"/>
                <field name="tien_do" type="measure" string="% Trung b√¨nh"/>
            </pivot>
        </field>
    </record>

    <record id="action_bao_cao_du_an" model="ir.actions.act_window">
        <field name="name">Trung t√¢m B√°o c√°o (Analytics)</field>
        <field name="res_model">quan.ly.cong.viec</field>
        <field name="view_mode">graph,pivot</field>
        <field name="view_id" ref="view_du_an_task_analysis_graph"/>
        <field name="search_view_id" ref="view_cong_viec_analysis_search"/>
        <field name="context">{'group_by': ['du_an_id', 'trang_thai'], 'search_default_group_project': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Ch∆∞a c√≥ d·ªØ li·ªáu ph√¢n t√≠ch. H√£y t·∫°o c√¥ng vi·ªác m·ªõi!
            </p>
        </field>
    </record>

    <menuitem id="menu_bao_cao_du_an"
              name="üìä Analytics &amp; Reports"
              parent="menu_du_an_root"
              action="action_bao_cao_du_an"
              sequence="99"/>

</odoo>